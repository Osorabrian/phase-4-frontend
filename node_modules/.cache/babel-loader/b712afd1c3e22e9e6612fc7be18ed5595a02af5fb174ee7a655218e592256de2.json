{"ast":null,"code":"import _slicedToArray from\"/home/brian/Development/code/phase4/phase-4-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'../styling/login.css';import{useAuth}from'./auth';import{Link,useNavigate,useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignInPage(){var _location$state;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setuser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var auth=useAuth();var location=useLocation();var redirectPath=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.path)||'/appointments';var navigate=useNavigate();var logInData={name:user,password:password};function handleLogin(e){e.preventDefault();fetch('/login',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(logInData)}).then(function(response){if(response.ok){response.json().then(function(data){return console.log(data);});auth.login(user);navigate(redirectPath,{replace:true});}else{response.json().then(function(errorData){return setErrors(errorData.error);});}});}return/*#__PURE__*/_jsx(\"div\",{id:\"login-page\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"login-form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center'},children:\"Log In \"}),errors.length>0&&/*#__PURE__*/_jsx(\"ul\",{style:{color:'red'},children:/*#__PURE__*/_jsx(\"li\",{children:errors})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"user \"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",placeholder:\"Enter user\",required:true,onChange:function onChange(e){return setuser(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"password\",placeholder:\"Enter password\",autoComplete:\"true\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"p\",{className:\"form-text\",children:/*#__PURE__*/_jsx(Link,{to:\"/forget-password\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"form-text\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\" Create an account.\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",style:{width:'230px'},children:\"Log In\"})})]})});}","map":{"version":3,"names":["React","useState","useAuth","Link","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","SignInPage","_location$state","_useState","_useState2","_slicedToArray","user","setuser","_useState3","_useState4","password","setPassword","_useState5","_useState6","errors","setErrors","auth","location","redirectPath","state","path","navigate","logInData","name","handleLogin","e","preventDefault","fetch","method","headers","credentials","body","JSON","stringify","then","response","ok","json","data","console","log","login","replace","errorData","error","id","children","onSubmit","style","textAlign","length","color","className","type","placeholder","required","onChange","target","value","autoComplete","to","width"],"sources":["/home/brian/Development/code/phase4/phase-4-project/client/src/components/LogInPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport '../styling/login.css';\nimport { useAuth } from './auth';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\n\nexport default function SignInPage() {\n\t\n\tconst [user, setuser] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [errors, setErrors] = useState([]);\n\tconst auth = useAuth()\n\tconst location = useLocation()\n\n\tconst redirectPath = location.state?.path || '/appointments'\n\n\tconst navigate = useNavigate();\n\n\tconst logInData = { name: user, password };\n\n\tfunction handleLogin(e) {\n\t\te.preventDefault();\n\t\tfetch('/login', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tcredentials: 'include',\n\t\t\tbody: JSON.stringify(logInData)\n\t\t}).then((response) => {\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.json().then((data) => console.log(data));\n\t\t\t\tauth.login(user)\n\t\t\t\tnavigate(redirectPath, {replace: true});\n\t\t\t} else {\n\t\t\t\tresponse.json().then((errorData) => setErrors(errorData.error));\n\t\t\t}\n\t\t});\n\t}\n\n\treturn (\n\t\t<div id=\"login-page\">\n\t\t\t<form id=\"login-form\" onSubmit={handleLogin}>\n\t\t\t\t<h2 style={{ textAlign: 'center' }}>Log In </h2>\n\t\t\t\t{errors.length > 0 && (\n\t\t\t\t\t<ul style={{ color: 'red' }}>\n\t\t\t\t\t\t<li>{errors}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\t\t\t\t<div className=\"row mb-3\">\n\t\t\t\t\t<label className=\"form-label\">user </label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Enter user\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tonChange={(e) => setuser(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row mb-3\">\n\t\t\t\t\t<label className=\"form-label\">Password</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"Enter password\"\n\t\t\t\t\t\tautoComplete=\"true\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"form-text\">\n\t\t\t\t\t<Link to=\"/forget-password\">Forgot Password?</Link>\n\t\t\t\t</p>\n\t\t\t\t<p className=\"form-text\">\n\t\t\t\t\tDon't have an account?\n\t\t\t\t\t<Link to=\"/register\"> Create an account.</Link>\n\t\t\t\t</p>\n\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"btn btn-primary\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tstyle={{ width: '230px' }}\n\t\t\t\t\t>\n\t\t\t\t\t\tLog In\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}