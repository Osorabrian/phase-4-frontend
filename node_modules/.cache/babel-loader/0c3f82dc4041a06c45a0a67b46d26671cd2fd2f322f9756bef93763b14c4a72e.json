{"ast":null,"code":"import _slicedToArray from\"/home/brian/Development/code/phase4/phase-4-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'../styling/viewappointments.css';import{Link}from'react-router-dom';import{useAuth}from'./auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ViewAppointment(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),appointments=_useState2[0],setAppointments=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setErrors=_useState4[1];var auth=useAuth();useEffect(function(){fetch('/patient_appointment',{method:'GET',credentials:'include'}).then(function(response){if(response.ok){response.json().then(function(data){return setAppointments(data);});}else{response.json().then(function(errorData){return setErrors(errorData.error);});}});},[]);function handleDelete(e){var id=e.target.value;fetch(\"/appointments/\".concat(id),{method:'DELETE',credentials:'include'}).then(function(response){if(response.ok){response.json().then(function(data){return console.log(data);});window.location.reload(true);}});}var allAppointments=appointments.map(function(appointment){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:appointment.id}),/*#__PURE__*/_jsx(\"td\",{children:appointment.doctor.id}),/*#__PURE__*/_jsx(\"td\",{children:appointment.doctor.name}),/*#__PURE__*/_jsx(\"td\",{children:appointment.doctor.speciality}),/*#__PURE__*/_jsx(\"td\",{children:appointment.appointment_type}),/*#__PURE__*/_jsx(\"td\",{children:appointment.date}),/*#__PURE__*/_jsx(\"td\",{children:appointment.duration}),/*#__PURE__*/_jsxs(\"td\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-info\",to:\"/update-appointment/\".concat(appointment.id),children:\"Update\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",value:appointment.id,onClick:handleDelete,children:\"Delete\"})})]})]},appointment.id);});return/*#__PURE__*/_jsxs(\"div\",{id:\"all-appointments-page\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"welcome-message\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Hi, \",auth.user.slice(0,1).toUpperCase()+auth.user.slice(1)]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Here is a list of all your appointments.\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"add-button\",children:/*#__PURE__*/_jsxs(Link,{className:\"btn btn-success\",to:\"/create-appointment\",children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'25px'},children:\"+\"}),\" Create Appointment\"]})}),error.length>0&&/*#__PURE__*/_jsx(\"ul\",{style:{color:'red'},children:/*#__PURE__*/_jsx(\"li\",{children:error})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",id:\"appointments-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-light\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"No.\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Doctor ID.\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Doctor Name\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Speciality\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Appointment type\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Duration\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allAppointments})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","useAuth","jsx","_jsx","jsxs","_jsxs","ViewAppointment","_useState","_useState2","_slicedToArray","appointments","setAppointments","_useState3","_useState4","error","setErrors","auth","fetch","method","credentials","then","response","ok","json","data","errorData","handleDelete","e","id","target","value","concat","console","log","window","location","reload","allAppointments","map","appointment","children","doctor","name","speciality","appointment_type","date","duration","className","to","onClick","user","slice","toUpperCase","style","fontSize","length","color"],"sources":["/home/brian/Development/code/phase4/phase-4-project/client/src/components/viewappointment.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport '../styling/viewappointments.css';\nimport { Link } from 'react-router-dom';\nimport {useAuth} from './auth'\n\nexport default function ViewAppointment() {\n\tconst [appointments, setAppointments] = useState([]);\n\tconst [error, setErrors] = useState([]);\n\tconst auth = useAuth()\n\n\tuseEffect(() => {\n\t\tfetch('/patient_appointment', {\n\t\t\tmethod: 'GET',\n\t\t\tcredentials: 'include'\n\t\t}).then((response) => {\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.json().then((data) => setAppointments(data));\n\t\t\t} else {\n\t\t\t\tresponse.json().then((errorData) => setErrors(errorData.error));\n\t\t\t}\n\t\t});\n\t}, []);\n\n\tfunction handleDelete(e) {\n\t\tlet id = e.target.value;\n\t\tfetch(`/appointments/${id}`, {\n\t\t\tmethod: 'DELETE',\n\t\t\tcredentials: 'include'\n\t\t}).then((response) => {\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.json().then((data) => console.log(data));\n\t\t\t\twindow.location.reload(true);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst allAppointments = appointments.map((appointment) => {\n\t\treturn (\n\t\t\t<tr key={appointment.id}>\n\t\t\t\t<td>{appointment.id}</td>\n\t\t\t\t<td>{appointment.doctor.id}</td>\n\t\t\t\t<td>{appointment.doctor.name}</td>\n\t\t\t\t<td>{appointment.doctor.speciality}</td>\n\t\t\t\t<td>{appointment.appointment_type}</td>\n\t\t\t\t<td>{appointment.date}</td>\n\t\t\t\t<td>{appointment.duration}</td>\n\t\t\t\t<td className=\"row\">\n\t\t\t\t\t<div className=\"col-6\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tclassName=\"btn btn-info\"\n\t\t\t\t\t\t\tto={`/update-appointment/${appointment.id}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tUpdate\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"col-6\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"btn btn-danger\"\n\t\t\t\t\t\t\tvalue={appointment.id}\n\t\t\t\t\t\t\tonClick={handleDelete}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t);\n\t});\n\n\treturn (\n\t\t<div id=\"all-appointments-page\">\n\t\t\t<div id=\"welcome-message\">\n\t\t\t\t<h1>Hi, {auth.user.slice(0, 1).toUpperCase() + auth.user.slice(1)}</h1>\n\t\t\t\t<h3>Here is a list of all your appointments.</h3>\n\t\t\t</div>\n\n\t\t\t<div id=\"add-button\">\n\t\t\t\t<Link className=\"btn btn-success\" to=\"/create-appointment\">\n\t\t\t\t\t<span style={{ fontSize: '25px' }}>+</span> Create Appointment\n\t\t\t\t</Link>\n\t\t\t</div>\n\n\t\t\t{error.length > 0 && (\n\t\t\t\t<ul style={{ color: 'red' }}>\n\t\t\t\t\t<li>{error}</li>\n\t\t\t\t</ul>\n\t\t\t)}\n\n\t\t\t<table className=\"table\" id=\"appointments-table\">\n\t\t\t\t<thead className=\"thead\">\n\t\t\t\t\t<tr className=\"text-light\">\n\t\t\t\t\t\t<td>No.</td>\n\t\t\t\t\t\t<td>Doctor ID.</td>\n\t\t\t\t\t\t<td>Doctor Name</td>\n\t\t\t\t\t\t<td>Speciality</td>\n\t\t\t\t\t\t<td>Appointment type</td>\n\t\t\t\t\t\t<td>Date</td>\n\t\t\t\t\t\t<td>Duration</td>\n\t\t\t\t\t\t<td>Action</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\n\t\t\t\t<tbody>{allAppointments}</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}